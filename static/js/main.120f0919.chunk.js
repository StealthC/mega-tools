(this["webpackJsonpmega-tools"]=this["webpackJsonpmega-tools"]||[]).push([[0],{17:function(e,t,n){e.exports={Sliders:"SMDColorSelector_Sliders__3ENca",Value:"SMDColorSelector_Value__2Dhvx",ColorInput:"SMDColorSelector_ColorInput__3URPy",R:"SMDColorSelector_R__2SUfS",G:"SMDColorSelector_G__39nqU",B:"SMDColorSelector_B__18YXH"}},49:function(e,t,n){},53:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),l=(n(49),n(22)),i=(n(53),n(27)),s=n(7),d=n(62),u=n(61),j=n(39),b=n(65),h=function(){return Object(l.b)()},x=l.c,g=n(18),p=0,O=1,v=2,m=[[0,52,87,116,144,172,206,255],[0,29,52,70,87,101,116,130],[130,144,158,172,187,206,228,255],[0,36,72,108,144,180,216,255],[0,18,36,54,72,90,108,126],[126,144,162,180,198,216,234,255]];function f(e){return m[e]}function M(e){return 0===(-3823&e)}function S(e){return{r:e>>>1&7,g:e>>>5&7,b:e>>>9&7}}function y(e){return e.b<<9|e.g<<5|e.r<<1}function A(e,t){for(var n=0;n<t.length;n+=1)if(t[n]>=e){if(!(n>0))return n;if(e-t[n-1]<t[n]-e)return n-1}return t.length-1}function R(e,t,n){return(1-n)*e+n*t}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m[0],n=S(e);return n.r=t[n.r],n.g=t[n.g],n.b=t[n.b],n.r<<16|n.g<<8|n.b}function k(e,t,n){var a=S(e),r=S(t);return y({r:Math.round(R(a.r,r.r,n)),g:Math.round(R(a.g,r.g,n)),b:Math.round(R(a.b,r.b,n))})}function V(e){var t=e.toString(16);return"#".concat("0".repeat(Math.max(0,6-t.length))).concat(t)}var C={color:0,colorMode:p,gradientStart:0,gradientEnd:3822,gradientSteps:8,gradientMode:p},D=Object(g.c)({name:"palette",initialState:C,reducers:{setColor:function(e,t){e.color=t.payload},setColorMode:function(e,t){e.colorMode=t.payload},setGradientStart:function(e,t){e.gradientStart=t.payload},setGradientEnd:function(e,t){e.gradientEnd=t.payload},setGradientSteps:function(e,t){e.gradientSteps=t.payload},setGradientMode:function(e,t){e.gradientMode=t.payload}}}),w=D.actions,_=w.setColor,B=(w.setColorMode,w.setGradientStart),L=w.setGradientEnd,P=(w.setGradientSteps,w.setGradientMode,function(e){return{color:e.palette.color,colorMode:e.palette.colorMode}}),E=function(e){return{gradientStart:e.palette.gradientStart,gradientEnd:e.palette.gradientEnd,gradientSteps:e.palette.gradientSteps,gradientMode:e.palette.gradientMode}},I=D.reducer,T=n(11),G=n(64),Y=n(17),F=n.n(Y),H=n(1);function U(e){return"0x".concat((2*e).toString(16))}function W(e){var t=e.initialColor,n=void 0===t?0:t,r=e.initialBrightnessMode,o=void 0===r?p:r,c=e.disableMode,l=e.onChangeColor,i=Object(a.useState)(n),s=Object(T.a)(i,2),d=s[0],b=s[1],h=Object(a.useState)("0x".concat(n.toString(16))),x=Object(T.a)(h,2),g=x[0],R=x[1],k=Object(a.useState)(o),C=Object(T.a)(k,2),D=C[0],w=C[1],_=S(d),B=_.r,L=_.g,P=_.b,E=Object(a.useRef)(null),I=Object(a.useRef)(null),Y=Object(a.useRef)(null),W=V(N(d,f(D))),z=function(){var e,t,n,a=y({r:(null===(e=E.current)||void 0===e?void 0:e.valueAsNumber)||0,g:(null===(t=I.current)||void 0===t?void 0:t.valueAsNumber)||0,b:(null===(n=Y.current)||void 0===n?void 0:n.valueAsNumber)||0});R("0x".concat(a.toString(16))),b(a),l&&l(a)};return Object(H.jsx)("div",{children:Object(H.jsxs)(u.a,{children:[Object(H.jsx)(j.a,{xs:2,children:Object(H.jsx)("div",{className:"border rounded border-2 p-1 h-100",children:Object(H.jsx)("div",{className:"h-100",style:{backgroundColor:W,width:"100%"},children:"\xa0"})})}),Object(H.jsxs)(j.a,{children:[Object(H.jsxs)(G.a.Group,{as:u.a,xs:2,lg:6,children:[c?null:Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(G.a.Label,{column:!0,sm:6,md:3,lg:"auto",children:"Mode:"}),Object(H.jsx)(j.a,{xs:6,md:3,children:Object(H.jsxs)(G.a.Select,{defaultValue:D,onChange:function(e){return w(parseInt(e.currentTarget.value))},children:[Object(H.jsx)("option",{value:p,children:"Normal"}),Object(H.jsx)("option",{value:O,children:"Shadow"}),Object(H.jsx)("option",{value:v,children:"Highlight"})]})})]}),Object(H.jsx)(G.a.Label,{column:!0,xs:6,md:3,lg:"auto",children:"SMD:"}),Object(H.jsx)(j.a,{xs:6,md:3,lg:"auto",children:Object(H.jsx)(G.a.Control,{value:g,onChange:function(e){R(e.currentTarget.value);var t=parseInt(e.currentTarget.value);M(t)&&(b(t),l&&l(t))}})}),Object(H.jsxs)(G.a.Label,{column:!0,xs:4,lg:"auto",children:["Picker:"," "]}),Object(H.jsx)(j.a,{xs:4,children:Object(H.jsx)(G.a.Control,{type:"color",value:W,onChange:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m[0],n=A(255&e,t),a=A(e>>>8&255,t);return y({r:A(e>>>16&255,t),g:a,b:n})}(parseInt(e.currentTarget.value.substr(1),16),f(D));b(t),R("0x".concat(t.toString(16))),l&&l(t)}})}),Object(H.jsxs)(G.a.Label,{className:"text-center",column:!0,xs:4,children:["Web: ",W]})]}),Object(H.jsxs)("div",{className:F.a.Sliders,children:[Object(H.jsxs)(u.a,{className:F.a.R,children:[Object(H.jsx)(j.a,{children:Object(H.jsx)(G.a.Range,{ref:E,min:0,max:7,step:1,value:B,onChange:z})}),Object(H.jsx)(j.a,{className:F.a.Value,xs:"auto",children:U(B)})]}),Object(H.jsxs)(u.a,{className:F.a.G,children:[Object(H.jsx)(j.a,{children:Object(H.jsx)(G.a.Range,{ref:I,min:0,max:7,step:1,value:L,onChange:z})}),Object(H.jsx)(j.a,{className:F.a.Value,xs:"auto",children:U(L)})]}),Object(H.jsxs)(u.a,{className:F.a.B,children:[Object(H.jsx)(j.a,{children:Object(H.jsx)(G.a.Range,{ref:Y,min:0,max:7,step:1,value:P,onChange:z})}),Object(H.jsx)(j.a,{className:F.a.Value,xs:"auto",children:U(P)})]})]})]})]})})}function z(){var e=h(),t=x(P),n=t.color,a=t.colorMode;return Object(H.jsx)(W,{initialColor:n,initialBrightnessMode:a,onChangeColor:function(t){e(_(t))}})}var K=n(3),J=n.n(K);function q(e){var t=e.colors,n=e.mode,a=void 0===n?p:n,r=e.inline,o=void 0!==r&&r,c=t.map((function(e){return Object(H.jsx)("div",{className:J()("text-center px-4 d-inline",{"d-inline":o,"d-block":!o}),style:{backgroundColor:M(e)?V(N(e,f(a))):"none"},children:Object(H.jsxs)("span",{style:{color:"white",mixBlendMode:"difference"},children:["0x".concat(e.toString(16)),M(e)?null:" (Invalid)","\xa0"]})})}));return Object(H.jsx)("div",{className:J()("border rounded border-2 p-1 d-inline",{"d-inline":o,"d-block":!o}),children:c})}function X(){var e=x(E),t=e.gradientStart,n=e.gradientEnd,a=e.gradientSteps,r=e.gradientMode,o=function(e,t,n){for(var a=[],r=0;r<n;r+=1){var o=k(e,t,r/(n-1));a.push(o)}return a}(t,n,a),c=h(),l=o.map((function(e){return"0x".concat(e.toString(16))})).join(", ");return Object(H.jsxs)("div",{children:[Object(H.jsxs)(u.a,{children:[Object(H.jsxs)(j.a,{lg:6,className:"pt-2",children:[Object(H.jsx)("h4",{children:"Starting Color"}),Object(H.jsx)(W,{initialColor:t,initialBrightnessMode:r,disableMode:!0,onChangeColor:function(e){return c(B(e))}})]}),Object(H.jsxs)(j.a,{lg:6,className:"pt-2",children:[Object(H.jsx)("h4",{children:"Ending Color"}),Object(H.jsx)(W,{initialColor:n,initialBrightnessMode:r,disableMode:!0,onChangeColor:function(e){return c(L(e))}})]})]}),Object(H.jsxs)(u.a,{children:[Object(H.jsx)(j.a,{xs:12,md:6,className:"pt-2",children:Object(H.jsx)(q,{colors:o,mode:r})}),Object(H.jsx)(j.a,{xs:12,md:6,className:"pt-2",children:Object(H.jsx)(G.a.Control,{style:{resize:"none"},className:"h-100",as:"textarea",value:l})})]})]})}function $(){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("h3",{children:"Simple Color Selector"}),Object(H.jsx)(z,{}),Object(H.jsx)("h3",{className:"pt-4",children:"Gradient Generator"}),Object(H.jsx)(X,{}),Object(H.jsxs)("p",{className:"small pt-4",children:["Technical explanations can be found on:",Object(H.jsxs)("ul",{children:[Object(H.jsx)("li",{children:Object(H.jsx)("a",{href:"https://segaretro.org/Sega_Mega_Drive/Palettes_and_CRAM",target:"_blank",rel:"noreferrer",children:"Sega Mega Drive/Palettes and CRAM (Sega Retro)"})}),Object(H.jsx)("li",{children:Object(H.jsx)("a",{href:"http://gendev.spritesmind.net/forum/viewtopic.php?t=2188",target:"_blank",rel:"noreferrer",children:"MD VDP color levels (spritesmind.net GenDev Forum, TmEE co.(TM) Post)"})})]})]})]})}var Q,Z,ee=n(63);function te(e){var t=e.data;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("h3",{className:"text-center",children:t.title}),Object(H.jsx)("dl",{className:"row",children:t.data.map((function(e){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("dt",{className:"col col-6 text-end",children:e.key}),Object(H.jsx)("dd",{className:"col col-6",children:e.value})]})}))})]})}!function(e){e[e.m68kToVRAM=0]="m68kToVRAM",e[e.VRAM_FILL=1]="VRAM_FILL",e[e.VRAM_TO_VRAM=2]="VRAM_TO_VRAM"}(Q||(Q={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VRAM=1]="VRAM",e[e.CRAM=2]="CRAM",e[e.VSRAM=4]="VSRAM",e[e.VRAM_BYTE=5]="VRAM_BYTE"}(Z||(Z={}));var ne=["UNKNOWN","VRAM","CRAM","VSRAM","VRAM  (byte)"];function ae(e){var t=function(e){var t=(2147483648&e)>>>31|(48&e)>>>3,n=Z.UNKNOWN;return 4!==t&&1!==t||(n=Z.CRAM),0===t&&(n=Z.VRAM),2===t&&(n=Z.VSRAM),6===t&&(n=Z.VRAM_BYTE),{memorySpace:n,write:0!==(1073741824&e),DMA:0!==(128&e),VRAM2VRAMcp:0!==(64&e),address:(1073676288&e)>>>16|(3&e)<<14}}(e);return{title:"0x".concat(e.toString(16)," - VDP Address Operation"),data:[{key:"Memory Space",value:ne[t.memorySpace]},{key:"Operation type",value:t.write?"Write":"Read"},{key:"Address",value:"0x".concat(t.address.toString(16))},{key:"DMA?",value:t.DMA?"Yes":"No"},{key:"VRAM to VRAM copy?",value:t.VRAM2VRAMcp?"Yes":"No"}]}}var re=["Mode Register 1","Mode Register 2","Plane A Name Table Location","Window Name Table Location","Plane B Name Table Location","Sprite Table Location","Sprite Table Location (in 128kB VRAM)","Background Colour","Unused","Unused","Horizontal Interrupt Counter","Mode Register 3","Mode Register 4","Horizontal Scroll Data Location","Plane A & B Address (in 128kB VRAM)","Auto-Increment Value","Plane Size","Window Plane Horizontal Position","Window Plane Vertical Position","DMA Length","DMA Length","DMA Source","DMA Source","DMA Source"],oe=["64K to VRAM","VRAM Fill (source can be left blank)","VRAM to VRAM copy"];function ce(e){var t,n={register:(7936&(t=e))>>8,value:255&t},a=n.register,r=n.value,o=a>23?"Invalid Register Number":re[a],c={title:"0x".concat(e.toString(16)," - VDP Register Operation"),data:[{key:"Register",value:"0x".concat(a.toString(16)," - ").concat(o)},{key:"Value",value:"0x".concat(r.toString(16))}]};if(0===a){var l=function(e){return{clearLeftmost8pixels:0!==(32&e),enableHorizontalInterrupt:0!==(16&e),stopHVCounter:0!==(2&e),displayEnabled:0!==(1&e),useAllcolorBits:0!==(4&e)}}(r);c.data=c.data.concat([{key:"Clear leftmost 8 pixels?",value:l.clearLeftmost8pixels?"Yes (clear with Background color)":"No"},{key:"Enable Horizontal Interrupt?",value:l.enableHorizontalInterrupt?"Yes":"No"},{key:"Use all color bits?",value:l.useAllcolorBits?"Yes":"No (use only the LSB)"},{key:"Freeze H/V Counter?",value:l.stopHVCounter?"Yes":"No"},{key:"Enable display (used only for CSYNC)?",value:l.displayEnabled?"Yes":"No"}])}else if(1===a){var i=function(e){return{use128kbVRAM:0!==(128&e),displayEnabled:0!==(64&e),enableVerticalInterrupt:0!==(32&e),enableDMA:0!==(16&e),PALMode:0!==(8&e),MDMode:0!==(4&e)}}(r);c.data=c.data.concat([{key:"Use 128kB of VRAM?",value:i.use128kbVRAM?"Yes":"No"},{key:"Enable Display?",value:i.displayEnabled?"Yes":"No (fill with background color)"},{key:"Enable Vertical Interrupt?",value:i.enableVerticalInterrupt?"Yes":"No"},{key:"Enable DMA?",value:i.enableDMA?"Yes":"No"},{key:"PAL Mode (240 pixels - 30 cell)?",value:i.PALMode?"Yes":"No (224 pixel - 28 cell)"},{key:"Mega Drive (mode 5)?",value:i.MDMode?"Yes":"No (Master System - mode 4)"}])}else if(7===a){var s=function(e){return{paletteLine:(48&e)>>>4,colorIndex:(15&e)>>>0}}(r);c.data=c.data.concat([{key:"Background Palette Row",value:"0x".concat(s.paletteLine)},{key:"Background Palette Color",value:"0x".concat(s.colorIndex)}])}else if(10===a)c.data=c.data.concat([{key:"Number of scanlines between horizontal interrupts",value:"0x".concat(r.toString(16))}]);else if(15===a)c.data=c.data.concat([{key:"Increment value after each read/write to the data port",value:"0x".concat(r.toString(16))}]);else if(19===a){var d=r.toString(16);c.data=c.data.concat([{key:"DMA Length (low bytes)",value:"0x".concat(d," (0x??").concat("0".repeat(Math.max(0,2-d.length))+d,") - final value is multiplied by 2 bytes.")}])}else if(20===a)c.data=c.data.concat([{key:"DMA Length (high bytes)",value:"0x".concat(r.toString(16)," (0x").concat(r.toString(16),"??) - final value is multiplied by 2 bytes.")}]);else if(21===a){var u=r.toString(16);c.data=c.data.concat([{key:"DMA Source (low bytes)",value:"0x".concat(u," (0x????").concat("0".repeat(Math.max(0,2-u.length))+u,") - final value is multiplied by 2 bytes.")}])}else if(22===a){var j=r.toString(16);c.data=c.data.concat([{key:"DMA Source (middle bytes)",value:"0x".concat(j," (0x??").concat("0".repeat(Math.max(0,2-j.length))+j,"??) - final value is multiplied by 2 bytes.")}])}else if(23===a){var b=function(e){var t=(192&e)>>6,n={highBytes:(63&e)>>>0,DMAOp:Q.m68kToVRAM};return 2===t?n.DMAOp=Q.VRAM_FILL:3===t?n.DMAOp=Q.VRAM_TO_VRAM:n.highBytes=(127&e)>>>0,n}(r);c.data=c.data.concat([{key:"DMA Source (high bytes)",value:"0x".concat(b.highBytes.toString(16)," (0x").concat(b.highBytes.toString(16),"????) - final value is multiplied by 2 bytes.")},{key:"DMA Operation",value:"0x".concat(oe[b.DMAOp])}])}return c}function le(){var e=Object(a.useState)("0x0"),t=Object(T.a)(e,2),n=t[0],r=t[1];var o,c=parseInt(n),l={operations:[]},i="";try{l=function(e){var t={operations:[]};if(Number.isNaN(e))throw new Error("Please type a number.");if(e>4294967295)throw new Error("The number cannot be larger than longword (4 bytes)");if(e<0)throw new Error("The number need to be positive");if(32768===(32768&e)&&0===(24576&e)){if(t.isRegisterOp=!0,t.operations.push(65535&e),e>65535){if((2147483648&e)>>>0!==2147483648||0!==(1610612736&e))throw new Error("Invalid Operation");t.operations.unshift((4294901760&e)>>>16)}return t}if(0!==(65292&e))throw new Error("Invalid Operation");return t.operations.push(e),t}(c)}catch(s){i=s.message}return i||(o=l.isRegisterOp?Object(H.jsx)(u.a,{children:l.operations.map((function(e){return Object(H.jsx)(j.a,{children:Object(H.jsx)(te,{data:ce(e)})})}))}):Object(H.jsx)(te,{data:ae(l.operations[0])})),Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)("div",{children:[Object(H.jsxs)(G.a.Group,{children:[Object(H.jsxs)(G.a.Label,{children:["Type number sent to address ",Object(H.jsx)("mark",{children:"0xc00004"}),' (Control Port of VDP) to see what operation it does. Start with "0x" for hexadecimal. It works with words (2 Bytes) and longwords (4 bytes).']}),Object(H.jsx)(j.a,{children:Object(H.jsx)(G.a.Control,{className:"text-center",placeholder:"0x0",value:n,onChange:function(e){r(e.currentTarget.value)}})})]}),i?Object(H.jsx)(ee.a,{className:"text-center",children:i}):null,o]})})}function ie(){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(le,{}),Object(H.jsxs)("p",{className:"small pt-4",children:["Technical explanations can be found on:",Object(H.jsxs)("ul",{children:[Object(H.jsx)("li",{children:Object(H.jsx)("a",{href:"https://segaretro.org/Sega_Mega_Drive/VDP_registers",target:"_blank",rel:"noreferrer",children:"Sega Mega Drive/VDP registers (Sega Retro)"})}),Object(H.jsx)("li",{children:Object(H.jsx)("a",{href:"https://segaretro.org/Sega_Mega_Drive/VDP_general_usage",target:"_blank",rel:"noreferrer",children:"Sega Mega Drive/VDP general usage (Sega Retro)"})})]})]})]})}var se=function(){return Object(H.jsxs)(d.a,{children:[Object(H.jsxs)(u.a,{children:[Object(H.jsxs)(j.a,{children:[Object(H.jsx)("h1",{children:"Mega Tools"}),Object(H.jsx)("p",{className:"pb-2",children:"Some tools to help learning Sega Genesis/Mega Drive development."})]}),Object(H.jsx)(j.a,{xs:"auto",children:Object(H.jsx)("a",{href:"https://github.com/StealthC/mega-tools",target:"_blank",rel:"noreferrer",children:"View on Github"})})]}),Object(H.jsxs)(i.a,{children:[Object(H.jsxs)(b.a,{variant:"tabs",children:[Object(H.jsx)(b.a.Item,{children:Object(H.jsx)(b.a.Link,{as:i.b,to:"/colors",children:"SMD Colors"})}),Object(H.jsx)(b.a.Item,{children:Object(H.jsx)(b.a.Link,{as:i.b,to:"/vdpcontrol",children:"VDP Control Port"})})]}),Object(H.jsx)("div",{className:"py-4",children:Object(H.jsxs)(s.d,{children:[Object(H.jsx)(s.b,{path:"/colors",children:Object(H.jsx)($,{})}),Object(H.jsx)(s.b,{path:"/vdpcontrol",children:Object(H.jsx)(ie,{})}),Object(H.jsx)(s.b,{path:"/",children:Object(H.jsx)(s.a,{to:"/colors"})})]})})]}),Object(H.jsxs)("p",{className:"pt-4 text-center small",children:["If you like this project and want to help me to create more,"," ",Object(H.jsx)("a",{href:"https://www.patreon.com/stealthc",target:"_blank",rel:"noreferrer",children:"please consider being my patron"}),"."]})]})},de=n(34),ue=n.n(de),je=n(44);function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var he=Object(g.b)("counter/fetchCount",function(){var e=Object(je.a)(ue.a.mark((function e(t){var n;return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xe=Object(g.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(he.pending,(function(e){e.status="loading"})).addCase(he.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),ge=xe.actions,pe=(ge.increment,ge.decrement,ge.incrementByAmount,xe.reducer),Oe=Object(g.a)({reducer:{counter:pe,palette:I}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(l.a,{store:Oe,children:Object(H.jsx)(se,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.120f0919.chunk.js.map